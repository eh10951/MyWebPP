<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba Foro - DevTools</title>
    <style>
        body { background: #1a1a1a; color: #fff; font-family: Arial; padding: 20px; }
        .test { background: #333; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .pass { color: #00ff99; }
        .fail { color: #ff6b6b; }
    </style>
</head>
<body>
    <h1>Verificación del Foro</h1>
    <div class="test">
        <h3>Prueba 1: Verificar localStorage</h3>
        <p id="test1">Comprobando...</p>
    </div>
    <div class="test">
        <h3>Prueba 2: Verificar posts de ejemplo</h3>
        <p id="test2">Comprobando...</p>
    </div>
    <div class="test">
        <h3>Prueba 3: Verificar respuestas</h3>
        <p id="test3">Comprobando...</p>
    </div>
    <div class="test">
        <h3>Datos en localStorage:</h3>
        <pre id="datos" style="background: #222; padding: 10px; overflow-x: auto;"></pre>
    </div>

    <script>
        // Limpiar localStorage para prueba fresca
        // localStorage.removeItem('foro_posts');

        // Test 1: localStorage
        const test1 = document.getElementById('test1');
        if (typeof(Storage) !== "undefined") {
            test1.innerHTML = '<span class="pass">✓ localStorage disponible</span>';
        } else {
            test1.innerHTML = '<span class="fail">✗ localStorage no disponible</span>';
        }

        // Test 2: Posts de ejemplo
        const test2 = document.getElementById('test2');
        const posts = localStorage.getItem('foro_posts');
        if (posts) {
            const postsArray = JSON.parse(posts);
            test2.innerHTML = `<span class="pass">✓ ${postsArray.length} posts encontrados</span>`;
        } else {
            test2.innerHTML = '<span class="fail">✗ No hay posts en localStorage</span>';
        }

        // Test 3: Respuestas
        const test3 = document.getElementById('test3');
        if (posts) {
            const postsArray = JSON.parse(posts);
            let totalRespuestas = 0;
            postsArray.forEach((post, i) => {
                if (post.respuestas && post.respuestas.length > 0) {
                    totalRespuestas += post.respuestas.length;
                }
            });
            test3.innerHTML = `<span class="pass">✓ ${totalRespuestas} respuestas totales en los posts</span>`;
        } else {
            test3.innerHTML = '<span class="fail">✗ No se pueden verificar respuestas</span>';
        }

        // Mostrar datos
        if (posts) {
            const postsArray = JSON.parse(posts);
            document.getElementById('datos').textContent = JSON.stringify(postsArray, null, 2);
        } else {
            document.getElementById('datos').textContent = 'Sin datos en localStorage';
        }
    </script>
</body>
</html>
