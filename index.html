<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>U N R C</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <style>
        /* ========== DISE√ëO MODERNO Y VIBRANTE UNRC ========== */

        :root {
            --white: #FFFFFF;
            --light-gray-1: #F8F9FC;
            --light-gray-2: #EFF2F7;
            --light-gray-3: #E6EAF0;
            --gray-border: #CDD4DC;
            --text-primary: #1a1a2e;
            --text-secondary: #4a4a6a;
            --accent-blue: #1F2937;
            --accent-red: #B74545;
            --accent-gold: #B89D4E;
            --accent-coral: #D17A7A;
            --accent-purple: #8B7BA8;
            --particle-blue: #4F46E5;
            --particle-blue-light: #6366F1;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.3);
        }

        /* Modo Oscuro */
        :root.dark-mode {
            --white: #0f0f1a;
            --light-gray-1: #1a1a2e;
            --light-gray-2: #252542;
            --light-gray-3: #2d2d4a;
            --gray-border: rgba(212, 175, 55, 0.3);
            --text-primary: #f0f0f5;
            --text-secondary: #b0b0c5;
            --accent-blue: #E0E0E0;
            --particle-blue: #6366F1;
            --particle-blue-light: #818CF8;
            --glass-bg: rgba(15, 15, 26, 0.9);
            --glass-border: rgba(212, 175, 55, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.4s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.4s ease, transform 0.3s ease;
        }

        body {
            background: 
                radial-gradient(ellipse 80% 50% at 50% -20%, rgba(220, 38, 38, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 50%, rgba(212, 175, 55, 0.1) 0%, transparent 40%),
                radial-gradient(ellipse 50% 30% at 20% 80%, rgba(108, 92, 231, 0.08) 0%, transparent 40%),
                linear-gradient(180deg, var(--white) 0%, var(--light-gray-1) 50%, var(--light-gray-2) 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 400;
            overflow-x: hidden;
            min-height: 100vh;
        }

        :root.dark-mode body {
            background: 
                radial-gradient(ellipse 80% 50% at 50% -20%, rgba(220, 38, 38, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 50%, rgba(212, 175, 55, 0.15) 0%, transparent 40%),
                radial-gradient(ellipse 50% 30% at 20% 80%, rgba(108, 92, 231, 0.12) 0%, transparent 40%),
                linear-gradient(180deg, #0a0a12 0%, #0f0f1a 50%, #1a1a2e 100%);
            background-attachment: fixed;
        }

        /* Header con navegaci√≥n limpia y glassmorphism */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            padding: 18px 32px;
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            box-shadow: 
                0 4px 30px rgba(0, 0, 0, 0.1),
                0 1px 0 rgba(255, 255, 255, 0.5) inset;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        /* Part√≠culas en el header */
        .header-particles {
            display: none;
        }

        .particle {
            display: none;
        }

        .particle:nth-child(1) {
            left: 10%;
            top: 20%;
            animation-delay: 0s;
        }

        .particle:nth-child(2) {
            left: 20%;
            top: 50%;
            animation-delay: 1s;
        }

        .particle:nth-child(3) {
            left: 30%;
            top: 30%;
            animation-delay: 2s;
        }

        .particle:nth-child(4) {
            left: 60%;
            top: 60%;
            animation-delay: 1.5s;
        }

        .particle:nth-child(5) {
            left: 70%;
            top: 20%;
            animation-delay: 2.5s;
        }

        .particle:nth-child(6) {
            left: 85%;
            top: 50%;
            animation-delay: 0.5s;
        }

        .particle:nth-child(7) {
            left: 15%;
            top: 70%;
            animation-delay: 3s;
        }

        .particle:nth-child(8) {
            left: 50%;
            top: 70%;
            animation-delay: 1.8s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
                opacity: 0.15;
            }

            50% {
                transform: translateY(-20px);
                opacity: 0.3;
            }
        }

        :root.dark-mode header {
            background: rgba(15, 15, 26, 0.92);
            box-shadow: 
                0 4px 30px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(212, 175, 55, 0.05),
                0 1px 0 rgba(212, 175, 55, 0.1) inset;
            border-bottom-color: rgba(212, 175, 55, 0.15);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .logo {
            font-size: 24px;
            font-weight: 500;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }

        .logo span {
            color: var(--accent-red);
            font-weight: 700;
        }

        nav.menu ul {
            display: flex;
            list-style: none;
            gap: 32px;
        }

        nav.menu a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease;
            letter-spacing: 0.25px;
        }

        nav.menu a:hover {
            color: var(--text-primary);
        }

        .dark-mode-btn {
            background: none;
            border: 1px solid var(--gray-border);
            color: var(--text-secondary);
            font-size: 18px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .dark-mode-btn:hover {
            background: var(--light-gray-1);
            color: var(--text-primary);
            border-color: var(--accent-red);
        }

        .dark-mode-btn i {
            transition: transform 0.3s ease;
        }

        .dark-mode-btn:active i {
            transform: rotate(20deg);
        }

        /* Main content */
        main {
            margin-top: 64px;
            position: relative;
            z-index: 1;
        }

        /* Forum Header Section - Dise√±o Hero Vibrante */
        .forum-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 140px 24px 100px;
            min-height: auto;
            position: relative;
            overflow: hidden;
            background: 
                radial-gradient(ellipse 100% 80% at 50% 20%, rgba(220, 38, 38, 0.08) 0%, transparent 60%),
                radial-gradient(ellipse 80% 60% at 70% 80%, rgba(212, 175, 55, 0.06) 0%, transparent 50%),
                linear-gradient(180deg, transparent 0%, rgba(255, 255, 255, 0.5) 100%);
            border-bottom: none;
        }

        .forum-header::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-red), var(--accent-gold), var(--accent-red), transparent);
            border-radius: 2px;
        }

        :root.dark-mode .forum-header {
            background: 
                radial-gradient(ellipse 100% 80% at 50% 20%, rgba(220, 38, 38, 0.12) 0%, transparent 60%),
                radial-gradient(ellipse 80% 60% at 70% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                linear-gradient(180deg, transparent 0%, rgba(15, 15, 26, 0.3) 100%);
        }

        .forum-title {
            font-size: clamp(32px, 5vw, 64px);
            font-weight: 600;
            letter-spacing: -1.5px;
            line-height: 1.1;
            color: var(--text-primary);
            margin-bottom: 16px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .forum-title span {
            background: linear-gradient(135deg, var(--accent-red) 0%, var(--accent-gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .forum-subtitle {
            font-size: clamp(16px, 2.5vw, 20px);
            color: var(--text-secondary);
            max-width: 700px;
            font-weight: 300;
            line-height: 1.6;
            margin: 0;
        }

        /* SECCI√ìN MODELO 3D RIZOMA - Dise√±o Vibrante */
        .rizoma-3d-section {
            padding: 80px 24px 100px;
            position: relative;
            overflow: hidden;
        }

        .rizoma-3d-section::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            background: 
                radial-gradient(ellipse 40% 40% at 30% 30%, rgba(220, 38, 38, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse 50% 50% at 70% 70%, rgba(212, 175, 55, 0.06) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .rizoma-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            border-radius: 28px;
            overflow: hidden;
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.15),
                0 1px 0 rgba(255, 255, 255, 0.5) inset;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        :root.dark-mode .rizoma-container {
            background: rgba(26, 31, 46, 0.8);
            border-color: rgba(212, 175, 55, 0.2);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 0 50px rgba(212, 175, 55, 0.08),
                0 1px 0 rgba(212, 175, 55, 0.1) inset;
        }

        .rizoma-container:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 30px 80px rgba(220, 38, 38, 0.2),
                0 1px 0 rgba(255, 255, 255, 0.6) inset;
            border-color: rgba(220, 38, 38, 0.3);
        }

        :root.dark-mode .rizoma-container:hover {
            box-shadow: 
                0 30px 80px rgba(212, 175, 55, 0.25),
                0 0 70px rgba(212, 175, 55, 0.12),
                0 1px 0 rgba(212, 175, 55, 0.2) inset;
            border-color: rgba(212, 175, 55, 0.5);
        }

        .rizoma-iframe {
            width: 100%;
            height: 700px;
            border: none;
            display: block;
            background: transparent;
        }

        @media (max-width: 1024px) {
            .rizoma-3d-section {
                padding: 70px 20px;
            }

            .rizoma-container {
                max-width: 100%;
            }

            .rizoma-iframe {
                height: 650px;
            }
        }

        @media (max-width: 768px) {
            .rizoma-3d-section {
                padding: 60px 16px;
            }

            .rizoma-container {
                max-width: 100%;
                border-radius: 20px;
            }

            .rizoma-iframe {
                height: 550px;
            }
        }

        @media (max-width: 480px) {
            .rizoma-3d-section {
                padding: 40px 12px 60px;
            }

            .rizoma-container {
                max-width: 100%;
                border-radius: 16px;
            }

            .rizoma-iframe {
                height: 350px;
            }
        }

        @media (max-width: 360px) {
            .rizoma-3d-section {
                padding: 30px 10px;
            }

            .rizoma-iframe {
                height: 320px;
            }
        }

        .forum-subtitle {
            font-size: clamp(16px, 2.5vw, 20px);
            color: var(--text-secondary);
            max-width: 700px;
            line-height: 1.7;
            font-weight: 400;
        }

        /* Forum Container */
        .forum-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* New Post Section */
        .new-post-section {
            background: var(--white);
            border: 1px solid var(--gray-border);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .new-post-section h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid var(--gray-border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-red);
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn-submit {
            padding: 12px 28px;
            background: linear-gradient(135deg, var(--accent-red) 0%, var(--accent-gold) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
        }

        .btn-submit:hover {
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.25);
            transform: translateY(-2px);
        }

        .btn-submit:active {
            transform: translateY(0);
        }

        /* Posts List */
        .posts-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .post {
            background: var(--white);
            border: 1px solid var(--gray-border);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s ease;
            animation: slideUpFade 0.5s ease-out;
        }

        .post:hover {
            border-color: var(--accent-red);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.1);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .post-author {
            font-weight: 600;
            color: var(--accent-red);
            font-size: 15px;
        }

        .post-time {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .post-content {
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 16px;
            font-size: 15px;
        }

        .post-actions {
            display: flex;
            gap: 16px;
            border-top: 1px solid var(--gray-border);
            padding-top: 12px;
        }

        .post-action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 0;
        }

        .post-action-btn:hover {
            color: var(--accent-red);
        }

        /* Responses/Comments */
        .responses {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--light-gray-2);
        }

        .response {
            background: var(--light-gray-1);
            border-left: 3px solid var(--accent-red);
            padding: 16px;
            margin-top: 12px;
            border-radius: 6px;
            font-size: 14px;
        }

        .response-author {
            font-weight: 600;
            color: var(--accent-red);
            font-size: 13px;
            margin-bottom: 6px;
        }

        .response-content {
            color: var(--text-primary);
            line-height: 1.5;
        }

        .response-actions {
            display: flex;
            gap: 12px;
            margin-top: 8px;
            font-size: 12px;
        }

        .response-action {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 0;
        }

        .response-action:hover {
            color: var(--accent-red);
        }

        /* Reply Form */
        .reply-form {
            margin-top: 16px;
            padding: 16px;
            background: var(--light-gray-1);
            border-radius: 8px;
            display: none;
        }

        .reply-form.active {
            display: block;
        }

        .reply-form textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--gray-border);
            border-radius: 6px;
            font-family: inherit;
            font-size: 13px;
            color: var(--text-primary);
            resize: vertical;
            min-height: 60px;
            margin-bottom: 8px;
        }

        .reply-form-actions {
            display: flex;
            gap: 8px;
        }

        .reply-form-btn {
            padding: 8px 16px;
            background: var(--accent-red);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reply-form-btn:hover {
            background: #b91c1c;
        }

        .reply-form-btn.cancel {
            background: var(--gray-border);
            color: var(--text-primary);
        }

        .reply-form-btn.cancel:hover {
            background: var(--light-gray-3);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 24px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            color: var(--accent-red);
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        /* Footer con Glassmorphism */
        footer {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-top: 1px solid var(--glass-border);
            padding: 50px 24px;
            text-align: center;
            margin-top: 80px;
            position: relative;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.05);
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), var(--accent-red), var(--accent-gold), transparent);
        }

        :root.dark-mode footer {
            background: rgba(15, 15, 26, 0.9);
            border-top-color: rgba(212, 175, 55, 0.1);
            box-shadow: 
                0 -10px 40px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(212, 175, 55, 0.03);
        }

        footer p {
            color: var(--text-secondary);
            font-size: 14px;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* Animaciones */
        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Animaciones para el modal */
        @keyframes fadeInModal {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes scaleInModal {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes fadeInImage {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* ========== ESTILOS MEJORADOS PROFESIONALES ========== */

        /* Grid de Cards con Glassmorphism Vibrante */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            margin-bottom: 50px;
        }

        .stats-grid .stat-card {
            padding: 36px 28px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                0 1px 0 rgba(255, 255, 255, 0.6) inset;
        }

        :root.dark-mode .stats-grid .stat-card {
            background: rgba(26, 26, 46, 0.7);
            border-color: rgba(212, 175, 55, 0.15);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(212, 175, 55, 0.05),
                0 1px 0 rgba(212, 175, 55, 0.1) inset;
        }

        .stats-grid .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-gold), var(--accent-red));
            background-size: 200% 100%;
            opacity: 0;
            transition: opacity 0.4s ease;
            animation: gradientFlow 3s ease infinite;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .stats-grid .stat-card:hover {
            border-color: rgba(220, 38, 38, 0.3);
            box-shadow: 
                0 20px 60px rgba(220, 38, 38, 0.15),
                0 1px 0 rgba(255, 255, 255, 0.8) inset;
            transform: translateY(-12px) scale(1.02);
        }

        :root.dark-mode .stats-grid .stat-card:hover {
            border-color: rgba(212, 175, 55, 0.4);
            box-shadow: 
                0 20px 60px rgba(212, 175, 55, 0.2),
                0 0 50px rgba(212, 175, 55, 0.1),
                0 1px 0 rgba(212, 175, 55, 0.2) inset;
        }

        .stats-grid .stat-card:hover::before {
            opacity: 1;
        }

        .stats-grid .stat-number {
            font-size: 44px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-red), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: -1px;
        }

        .stats-grid .stat-label {
            font-size: 15px;
            color: var(--text-secondary);
            font-weight: 600;
            line-height: 1.6;
        }

        /* Post Cards con Glassmorphism Vibrante */
        .post {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 28px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            animation: slideUpFade 0.5s ease-out;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.06),
                0 1px 0 rgba(255, 255, 255, 0.5) inset;
        }

        .post::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-gold), var(--accent-red));
            background-size: 200% 100%;
            opacity: 0;
            transition: opacity 0.4s ease;
            animation: gradientFlow 3s ease infinite;
        }

        :root.dark-mode .post {
            background: rgba(26, 26, 46, 0.7);
            border-color: rgba(212, 175, 55, 0.15);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.25),
                0 0 20px rgba(212, 175, 55, 0.03),
                0 1px 0 rgba(212, 175, 55, 0.08) inset;
        }

        .post:hover {
            border-color: rgba(220, 38, 38, 0.4);
            box-shadow: 
                0 20px 50px rgba(220, 38, 38, 0.12),
                0 1px 0 rgba(255, 255, 255, 0.6) inset;
            transform: translateY(-8px);
        }

        :root.dark-mode .post:hover {
            border-color: rgba(212, 175, 55, 0.4);
            box-shadow: 
                0 20px 50px rgba(212, 175, 55, 0.15),
                0 0 40px rgba(212, 175, 55, 0.08),
                0 1px 0 rgba(212, 175, 55, 0.15) inset;
        }

        .post:hover::before {
            opacity: 1;
        }

        .post-author {
            font-weight: 700;
            color: var(--accent-red);
            font-size: 16px;
            letter-spacing: -0.3px;
        }

        .post-time {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .post-content {
            color: var(--text-primary);
            line-height: 1.7;
            margin-bottom: 16px;
            font-size: 15px;
        }

        /* New Post Section con Glassmorphism */
        .new-post-section {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.08),
                0 1px 0 rgba(255, 255, 255, 0.6) inset;
            position: relative;
            overflow: hidden;
        }

        .new-post-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-gold), var(--accent-purple));
            opacity: 0.8;
        }

        :root.dark-mode .new-post-section {
            background: rgba(26, 26, 46, 0.7);
            border-color: rgba(212, 175, 55, 0.15);
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(212, 175, 55, 0.05),
                0 1px 0 rgba(212, 175, 55, 0.1) inset;
        }

        .new-post-section h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 24px;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }

        .form-group input,
        .form-group textarea {
            border: 2px solid var(--gray-border);
            transition: all 0.3s ease;
            background: var(--white);
            font-weight: 500;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            border-color: var(--accent-red);
            box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);
            background: var(--white);
        }

        .btn-submit {
            font-weight: 700;
            letter-spacing: 0.5px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.2);
        }

        .btn-submit:hover {
            box-shadow: 0 12px 32px rgba(220, 38, 38, 0.3);
            transform: translateY(-3px);
        }

        /* Mejorar Response Cards */
        .response {
            background: linear-gradient(135deg, var(--light-gray-1) 0%, var(--light-gray-2) 100%);
            border-left: 4px solid var(--accent-red);
            padding: 18px;
            margin-top: 12px;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .response:hover {
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.08);
            transform: translateX(4px);
        }

        .response-author {
            font-weight: 700;
            color: var(--accent-red);
            font-size: 14px;
            margin-bottom: 6px;
            letter-spacing: -0.3px;
        }

        .response-content {
            color: var(--text-primary);
            line-height: 1.6;
            font-weight: 500;
        }

        /* Mejorar Forum Container */
        .forum-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 24px;
        }

        /* Content Section con dise√±o vibrante */
        .content-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 24px;
            position: relative;
        }

        .content-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 1400px;
            height: 100%;
            background: 
                radial-gradient(ellipse 50% 30% at 50% 0%, rgba(220, 38, 38, 0.04) 0%, transparent 70%),
                radial-gradient(ellipse 40% 40% at 80% 50%, rgba(212, 175, 55, 0.03) 0%, transparent 60%);
            pointer-events: none;
            z-index: -1;
        }

        .section-title {
            text-align: center;
            font-size: clamp(28px, 4vw, 42px);
            font-weight: 700;
            margin-bottom: 40px;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }

        .section-title span {
            background: linear-gradient(135deg, var(--accent-red), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .content-section p {
            font-weight: 500;
            color: var(--text-primary);
        }

        /* Mejorar t√≠tulos en contenido */
        .content-section h2 {
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        /* Estilos para im√°genes en cards */
        .stat-card img {
            transition: all 0.4s ease;
            filter: brightness(1);
        }

        .stat-card:hover img {
            filter: brightness(1.05) saturate(1.1);
            transform: scale(1.02);
        }

        /* Responsive */
        @media (max-width: 768px) {
            header {
                padding: 12px 16px;
            }

            .header-content {
                flex-direction: column;
                gap: 16px;
            }

            nav.menu ul {
                gap: 16px;
                font-size: 12px;
            }

            .forum-header {
                padding: 60px 16px 30px;
            }

            .forum-container {
                padding: 20px 16px;
            }

            .new-post-section {
                padding: 24px 16px;
            }

            .post {
                padding: 16px;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 10px 12px;
            }

            .logo {
                font-size: 18px;
            }

            nav.menu ul {
                gap: 8px;
                font-size: 11px;
            }

            .forum-header {
                padding: 40px 12px 20px;
            }

            .forum-title {
                font-size: clamp(24px, 5vw, 40px);
            }

            .forum-container {
                padding: 16px 12px;
            }

            .new-post-section {
                padding: 16px 12px;
            }

            .post {
                padding: 12px;
            }

            .post-header {
                flex-direction: column;
                gap: 8px;
            }

            .post-actions {
                flex-wrap: wrap;
            }

            .response {
                padding: 12px;
                font-size: 13px;
            }

        }

        /* ========== MEDIA QUERIES PARA GR√ÅFICAS EN M√ìVIL ========== */
        @media (max-width: 768px) {
            .chart-gallery {
                grid-template-columns: 1fr;
                gap: 16px;
                padding: 12px;
            }

            .chart-container {
                height: 300px;
                padding: 12px;
                border-radius: 12px;
            }

            .chart-item {
                padding: 12px;
            }

            .chart-label {
                font-size: 14px;
            }

            canvas[id*="Chart"] {
                max-width: 100% !important;
                height: auto !important;
            }

            .chartjs-legend {
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .chart-gallery {
                grid-template-columns: 1fr;
                gap: 12px;
                padding: 8px;
            }

            .chart-container {
                height: 250px;
                padding: 8px;
            }

            .chart-item {
                padding: 8px;
                border-radius: 8px;
            }

            .chart-label {
                font-size: 12px;
                line-height: 1.3;
            }

            .modal-content {
                width: 95%;
                max-height: 80vh;
            }

            .chart-container canvas {
                max-width: 100% !important;
            }
        }

        /* ========== MEJORAS DE TOUCH Y ACCESIBILIDAD ========== */
        @media (hover: none) and (pointer: coarse) {
            /* Dispositivos t√°ctiles */
            .btn {
                min-height: 44px;
                padding: 12px 20px;
            }

            .card:hover,
            .feature-card:hover {
                transform: none;
            }

            .expandable-chart {
                padding: 12px;
            }

            .post-actions button {
                min-height: 40px;
                min-width: 40px;
            }
        }
    </style>
</head>

<body>
    <!-- Canvas para part√≠culas UNRC -->
    <canvas id="particleCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 60vh; pointer-events: none; z-index: 0; background: transparent;"></canvas>
    
    <header>
        <div class="header-content">
            <div class="logo"><span>U N R C</span></div>
            <nav class="menu">
                <ul>
                    <li><a href="index.html" class="active">Principal</a></li>
                    <li><a href="foro.html">A.L.M.A</a></li>
                    <li><a href="antigravity.html">Mentor App</a></li>
                </ul>
            </nav>
            <button id="dark-mode-toggle" class="dark-mode-btn" title="Alternar modo oscuro">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <main>
        <!-- Forum Header -->
        <section class="forum-header">
            <h1 class="forum-title">An√°lisis Abandono Escolar <span>UNRC</span></h1>
            <p class="forum-subtitle">Una plataforma dedicada a visualizar y comprender las causas, consecuencias y
                soluciones del abandono escolar a trav√©s de datos y an√°lisis.</p>
        </section>

        <!-- SECCI√ìN INTRODUCCI√ìN AL PROBLEMA -->
        <section class="content-section">
            <h2 class="section-title">¬øQu√© es el Abandono <span>Escolar?</span></h2>
            <div class="intro-card">
                <div class="intro-icon">üìö</div>
                <p>
                    Es el abandono del sistema educativo por parte de los estudiantes, antes de
                    finalizar el grado o nivel que estaban cursando. Este fen√≥meno tiene profundas implicaciones tanto
                    para el individuo como para la sociedad, limitando oportunidades de desarrollo y perpetuando ciclos
                    de pobreza.
                </p>
            </div>
        </section>

        <style>
            .intro-card {
                max-width: 900px;
                margin: 0 auto;
                background: var(--glass-bg);
                backdrop-filter: blur(20px) saturate(180%);
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                padding: 50px;
                border-radius: 24px;
                border: 1px solid var(--glass-border);
                box-shadow: 
                    0 15px 50px rgba(0, 0, 0, 0.08),
                    0 1px 0 rgba(255, 255, 255, 0.6) inset;
                position: relative;
                overflow: hidden;
                transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            }

            .intro-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, var(--accent-red), var(--accent-gold), var(--accent-purple), var(--accent-gold), var(--accent-red));
                background-size: 300% 100%;
                animation: gradientFlow 4s ease infinite;
            }

            :root.dark-mode .intro-card {
                background: rgba(26, 31, 46, 0.75);
                border-color: rgba(212, 175, 55, 0.2);
                box-shadow: 
                    0 15px 50px rgba(0, 0, 0, 0.35),
                    0 0 40px rgba(212, 175, 55, 0.08),
                    0 1px 0 rgba(212, 175, 55, 0.12) inset;
            }

            .intro-card:hover {
                transform: translateY(-8px);
                box-shadow: 
                    0 25px 70px rgba(220, 38, 38, 0.12),
                    0 1px 0 rgba(255, 255, 255, 0.7) inset;
            }

            :root.dark-mode .intro-card:hover {
                box-shadow: 
                    0 25px 70px rgba(212, 175, 55, 0.18),
                    0 0 60px rgba(212, 175, 55, 0.12),
                    0 1px 0 rgba(212, 175, 55, 0.2) inset;
            }

            .intro-icon {
                font-size: 56px;
                margin-bottom: 24px;
                text-align: center;
                filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
            }

            .intro-card p {
                font-size: 18px;
                line-height: 1.9;
                color: var(--text-secondary);
                font-weight: 500;
                margin: 0;
                text-align: center;
            }
        </style>

        <!-- SECCI√ìN DE FACTORES Y CONSECUENCIAS -->
        <section class="content-section">
            <h2 class="section-title">
                Factores y <span>Consecuencias</span>
            </h2>

            <div class="stats-grid">
                <div class="stat-card factor-card">
                    <div class="factor-icon">üìä</div>
                    <h3 class="factor-title">Causas Principales</h3>
                    <p class="factor-description">
                        Factores socioecon√≥micos, problemas familiares, falta de inter√©s y bajo rendimiento acad√©mico
                        son algunas de las causas m√°s comunes que llevan a los j√≥venes a abandonar sus estudios.
                    </p>
                </div>
                <div class="stat-card factor-card">
                    <div class="factor-icon">üìà</div>
                    <h3 class="factor-title">Impacto a Largo Plazo</h3>
                    <p class="factor-description">
                        Las consecuencias incluyen menores ingresos, mayores tasas de desempleo, problemas de salud y
                        una participaci√≥n c√≠vica reducida, afectando la calidad de vida y el desarrollo social.
                    </p>
                </div>
                <div class="stat-card factor-card">
                    <div class="factor-icon">üí°</div>
                    <h3 class="factor-title">Posibles Soluciones</h3>
                    <p class="factor-description">
                        Implementar programas de tutor√≠a, becas, apoyo psicol√≥gico y mejorar la relevancia de los planes
                        de estudio son estrategias clave para mitigar la deserci√≥n escolar.
                    </p>
                </div>
            </div>
        </section>

        <style>
            .factor-card {
                text-align: center;
                padding: 40px 32px !important;
            }

            .factor-icon {
                font-size: 52px;
                margin-bottom: 20px;
                display: inline-block;
                filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.1));
                transition: transform 0.4s ease;
            }

            .factor-card:hover .factor-icon {
                transform: scale(1.15) rotate(-5deg);
            }

            .factor-title {
                font-size: 22px;
                margin-bottom: 16px;
                font-weight: 700;
                background: linear-gradient(135deg, var(--accent-gold), var(--accent-red));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                letter-spacing: -0.3px;
            }

            :root.dark-mode .factor-title {
                background: linear-gradient(135deg, #D4AF37, #FFD700);
                -webkit-background-clip: text;
                background-clip: text;
            }

            .factor-description {
                font-size: 15px;
                color: var(--text-secondary);
                line-height: 1.8;
                margin: 0;
                font-weight: 500;
            }
        </style>

        <!-- SECCI√ìN MODELO 3D |RIZOMA -->
        <section class="rizoma-3d-section">
            <div class="rizoma-container">
                <div class="rizoma-header">
                    <h3>An√°lisis de Factores</h3>
                    <p>Explora el modelo interactivo 3D</p>
                </div>
                <iframe src="rizoma_https_corregido.html" class="rizoma-iframe" title="Modelo 3D Rizoma"></iframe>
            </div>
        </section>

        <style>
            .rizoma-header {
                text-align: center;
                padding: 28px 24px 20px;
                border-bottom: 1px solid var(--glass-border);
                background: rgba(0, 0, 0, 0.02);
            }

            :root.dark-mode .rizoma-header {
                background: rgba(0, 0, 0, 0.15);
                border-bottom-color: rgba(212, 175, 55, 0.1);
            }

            .rizoma-header h3 {
                font-size: 24px;
                font-weight: 700;
                margin: 0 0 8px 0;
                background: linear-gradient(135deg, var(--accent-gold), var(--accent-red));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .rizoma-header p {
                font-size: 14px;
                color: var(--text-secondary);
                margin: 0;
                font-weight: 500;
            }

            .rizoma-iframe {
                width: 100%;
                height: 750px;
                border: none;
                display: block;
                background: transparent;
            }
        </style>

        <!-- GALER√çA DE GR√ÅFICAS -->
        <section class="content-section">
            <h2 class="section-title">
                Gr√°ficas y <span>Visualizaciones</span>
            </h2>

            <!-- GR√ÅFICAS INTERACTIVAS CON CHART.JS -->
            <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
            
            <div class="charts-grid">
                <!-- Gr√°fica 1: G√©nero -->
                <div class="chart-card" onclick="expandChart('genero')">
                    <div class="chart-container">
                        <canvas id="generoChart"></canvas>
                    </div>
                    <div class="chart-info">
                        <h4>Distribuci√≥n de G√©nero</h4>
                        <p><i class="fas fa-expand-alt"></i> Haz clic para expandir</p>
                    </div>
                </div>

                <!-- Gr√°fica 2: Edad -->
                <div class="chart-card" onclick="expandChart('edad')">
                    <div class="chart-container">
                        <canvas id="edadChart"></canvas>
                    </div>
                    <div class="chart-info">
                        <h4>Rango de Edad</h4>
                        <p><i class="fas fa-expand-alt"></i> Haz clic para expandir</p>
                    </div>
                </div>

                <!-- Gr√°fica 3: Pensado en Abandonar -->
                <div class="chart-card" onclick="expandChart('abandonar')">
                    <div class="chart-container">
                        <canvas id="abandonarChart"></canvas>
                    </div>
                    <div class="chart-info">
                        <h4>Pensado en Abandonar</h4>
                        <p><i class="fas fa-expand-alt"></i> Haz clic para expandir</p>
                    </div>
                </div>

                <!-- Gr√°fica 4: Conoce Abandono -->
                <div class="chart-card" onclick="expandChart('conoce')">
                    <div class="chart-container">
                        <canvas id="conoceAbandonoChart"></canvas>
                    </div>
                    <div class="chart-info">
                        <h4>Compa√±ero que Abandon√≥</h4>
                        <p><i class="fas fa-expand-alt"></i> Haz clic para expandir</p>
                    </div>
                </div>

                <!-- Gr√°fica 5: Raz√≥n Abandono -->
                <div class="chart-card" onclick="expandChart('razon')">
                    <div class="chart-container">
                        <canvas id="razonAbandonoChart"></canvas>
                    </div>
                    <div class="chart-info">
                        <h4>Raz√≥n de Abandono</h4>
                        <p><i class="fas fa-expand-alt"></i> Haz clic para expandir</p>
                    </div>
                </div>

                <!-- Gr√°fica 6: Apoyo Acad√©mico -->
                <div class="chart-card" onclick="expandChart('apoyo')">
                    <div class="chart-container">
                        <canvas id="apoyoAcademicoChart"></canvas>
                    </div>
                    <div class="chart-info">
                        <h4>Apoyo Acad√©mico</h4>
                        <p><i class="fas fa-expand-alt"></i> Haz clic para expandir</p>
                    </div>
                </div>
            </div>

            <!-- Gr√°fica Expandida: Regresi√≥n Log√≠stica Interactiva -->
            <div class="logistic-section">
                <h3 class="subsection-title">An√°lisis de <span>Regresi√≥n Log√≠stica</span></h3>
                <div class="logistic-chart-wrapper">
                    <div id="logisticChart"></div>
                </div>
            </div>

            <style>
                .charts-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                    gap: 32px;
                    margin-bottom: 50px;
                }

                .chart-card {
                    background: var(--glass-bg);
                    backdrop-filter: blur(20px) saturate(180%);
                    -webkit-backdrop-filter: blur(20px) saturate(180%);
                    border: 1px solid var(--glass-border);
                    border-radius: 24px;
                    overflow: hidden;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
                    box-shadow: 
                        0 8px 32px rgba(0, 0, 0, 0.08),
                        0 1px 0 rgba(255, 255, 255, 0.6) inset;
                    position: relative;
                }

                :root.dark-mode .chart-card {
                    background: rgba(26, 31, 46, 0.75);
                    border-color: rgba(212, 175, 55, 0.15);
                    box-shadow: 
                        0 8px 32px rgba(0, 0, 0, 0.3),
                        0 0 30px rgba(212, 175, 55, 0.05),
                        0 1px 0 rgba(212, 175, 55, 0.1) inset;
                }

                .chart-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 3px;
                    background: linear-gradient(90deg, var(--accent-red), var(--accent-gold), var(--accent-red));
                    background-size: 200% 100%;
                    opacity: 0;
                    transition: opacity 0.4s ease;
                    animation: gradientFlow 3s ease infinite;
                }

                .chart-card:hover {
                    transform: translateY(-10px) scale(1.02);
                    box-shadow: 
                        0 20px 60px rgba(220, 38, 38, 0.15),
                        0 1px 0 rgba(255, 255, 255, 0.7) inset;
                    border-color: rgba(220, 38, 38, 0.3);
                }

                :root.dark-mode .chart-card:hover {
                    box-shadow: 
                        0 20px 60px rgba(212, 175, 55, 0.2),
                        0 0 50px rgba(212, 175, 55, 0.1),
                        0 1px 0 rgba(212, 175, 55, 0.2) inset;
                    border-color: rgba(212, 175, 55, 0.4);
                }

                .chart-card:hover::before {
                    opacity: 1;
                }

                .chart-container {
                    width: 100%;
                    height: 280px;
                    padding: 24px;
                    background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.02) 100%);
                }

                :root.dark-mode .chart-container {
                    background: linear-gradient(180deg, rgba(15, 15, 26, 0.3) 0%, rgba(15, 15, 26, 0.5) 100%);
                }

                .chart-info {
                    padding: 20px 24px;
                    border-top: 1px solid var(--glass-border);
                    background: rgba(0, 0, 0, 0.02);
                }

                :root.dark-mode .chart-info {
                    background: rgba(0, 0, 0, 0.15);
                    border-top-color: rgba(212, 175, 55, 0.1);
                }

                .chart-info h4 {
                    font-size: 17px;
                    margin: 0 0 6px 0;
                    font-weight: 700;
                    background: linear-gradient(135deg, var(--accent-gold), var(--accent-red));
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                }

                .chart-info p {
                    font-size: 13px;
                    color: var(--text-secondary);
                    line-height: 1.5;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                .chart-info p i {
                    font-size: 11px;
                    opacity: 0.7;
                }

                /* Estilos para Regresi√≥n Log√≠stica */
                .chart-card-logistic {
                    grid-column: span 1;
                }

                .logistic-container {
                    width: 100%;
                    height: 300px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                /* Secci√≥n expandida de Regresi√≥n Log√≠stica */
                .logistic-section {
                    margin: 60px 0;
                    padding: 40px;
                    background: var(--glass-bg);
                    backdrop-filter: blur(20px) saturate(180%);
                    -webkit-backdrop-filter: blur(20px) saturate(180%);
                    border: 1px solid var(--glass-border);
                    border-radius: 24px;
                    box-shadow: 
                        0 8px 32px rgba(0, 0, 0, 0.08),
                        0 0 0 1px rgba(255, 255, 255, 0.2) inset;
                }

                .subsection-title {
                    font-size: 26px;
                    font-weight: 600;
                    margin-bottom: 30px;
                    color: var(--text-primary);
                }

                .subsection-title span {
                    background: linear-gradient(135deg, var(--accent-gold), var(--accent-red));
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                }

                .logistic-chart-wrapper {
                    width: 100%;
                    height: 600px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 16px;
                    background: var(--white);
                    padding: 20px;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
                }

                #logisticChart {
                    width: 100%;
                    height: 100%;
                }

                /* Ajustes para Plotly en modo responsivo */
                .plotly-graph-div {
                    width: 100% !important;
                    height: 100% !important;
                }
            </style>

            <!-- Script de Plotly para Regresi√≥n Log√≠stica -->
            <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
            <script>
                // Funci√≥n para renderizar la gr√°fica de Regresi√≥n Log√≠stica
                function renderLogisticChart() {
                    // --- DATOS ---
                    const x_historico = [2, 3, 4, 6, 7];
                    const y_historico = [1, 1, 1, 0, 0];
                    
                    // Curva Sigmoide
                    const x_sigmoide = [];
                    const y_sigmoide = [];
                    for (let x = 2.0; x <= 7.0; x += 0.05) {
                        x_sigmoide.push(x);
                        const prob = 1 / (1 + Math.exp(3 * x - 15)); 
                        y_sigmoide.push(prob);
                    }

                    // Predicci√≥n espec√≠fica (Semestre 5)
                    const x_prediccion = [5];
                    const y_prediccion = [0.52];
                    const clase_prediccion = 'S√ç';

                    // Trazos (Traces) de Plotly
                    const trace_historico = {
                        x: x_historico,
                        y: y_historico,
                        mode: 'markers',
                        type: 'scatter',
                        name: 'Datos Hist√≥ricos',
                        marker: {
                            color: '#00FF00',
                            size: 10,
                            opacity: 1,
                            line: { color: 'white', width: 2 }
                        }
                    };

                    const trace_sigmoide = {
                        x: x_sigmoide,
                        y: y_sigmoide,
                        mode: 'lines',
                        type: 'scatter',
                        name: 'Curva Sigmoide',
                        line: {
                            color: '#DC2626',
                            width: 3
                        }
                    };

                    const trace_prediccion = {
                        x: x_prediccion,
                        y: y_prediccion,
                        mode: 'markers',
                        type: 'scatter',
                        name: 'Predicci√≥n S5',
                        marker: {
                            color: '#FF00FF',
                            size: 10,
                            symbol: 'circle',
                            line: {
                                color: 'rgba(0,0,0,0.3)',
                                width: 1
                            }
                        }
                    };

                    const data = [trace_sigmoide, trace_historico, trace_prediccion];

                    // --- LAYOUT ---
                    const layout = {
                        title: {
                            text: '<b>Regresi√≥n Log√≠stica: Predicci√≥n del Semestre 5</b>',
                            font: { size: 22, color: 'white' }
                        },
                        paper_bgcolor: 'transparent',
                        plot_bgcolor: 'transparent',
                        xaxis: {
                            title: {
                                text: 'Semestre (X)',
                                font: { size: 14, color: 'white' }
                            },
                            range: [1.8, 7.2],
                            tickmode: 'linear',
                            tick0: 2,
                            dtick: 1,
                            gridcolor: 'rgba(255, 255, 255, 0.2)',
                            zeroline: false,
                            showgrid: true,
                            tickfont: { color: 'white' },
                            linecolor: 'transparent'
                        },
                        yaxis: {
                            title: {
                                text: 'Probabilidad P(Y=1)',
                                font: { size: 14, color: 'white' }
                            },
                            range: [-0.05, 1.05],
                            tickvals: [0, 0.5, 1],
                            ticktext: ['0 (NO)', '0.5', '1 (S√ç)'],
                            gridcolor: 'rgba(255, 255, 255, 0.2)',
                            zeroline: false,
                            showgrid: true,
                            tickfont: { color: 'white' },
                            linecolor: 'transparent'
                        },
                        showlegend: true,
                        legend: {
                            x: 0.98,
                            y: 0.98,
                            bgcolor: 'transparent',
                            bordercolor: 'transparent',
                            borderwidth: 0,
                            font: { size: 12, color: 'white' },
                            xanchor: 'right',
                            yanchor: 'top'
                        },
                        shapes: [
                            {
                                type: 'line',
                                xref: 'paper',
                                yref: 'y',
                                x0: 0,
                                y0: 0.5,
                                x1: 1,
                                y1: 0.5,
                                line: {
                                    color: '#10B981',
                                    width: 2,
                                    dash: 'dot'
                                }
                            }
                        ],
                        hovermode: 'closest',
                        margin: { l: 70, r: 50, t: 80, b: 70 }
                    };

                    // --- CONFIGURACI√ìN ---
                    const config = {
                        displayModeBar: false,
                        responsive: true,
                        displaylogo: false,
                        staticPlot: true
                    };

                    // Renderizar la gr√°fica
                    Plotly.newPlot('logisticChart', data, layout, config);
                }

                // Renderizar la gr√°fica cuando el DOM est√© listo
                document.addEventListener('DOMContentLoaded', function() {
                    if (document.getElementById('logisticChart')) {
                        renderLogisticChart();
                    }
                });
            </script>

            <!-- Secci√≥n de Tablas de Presupuestos -->
            <section class="content-section" style="margin-top: 60px; margin-bottom: 60px;">
                <h2 class="section-title">
                    <span>Tablas</span> de Presupuestos
                </h2>

                <h3 style="text-align: center; font-size: 20px; font-weight: 600; margin: 40px 0 30px 0; color: var(--text-primary);">Tabla 1: Presupuesto Total, Matr√≠cula y Presupuesto por Alumno</h3>
                <div style="width: 100%; overflow-x: auto; margin-bottom: 50px;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 13px; background: transparent;">
                        <thead>
                            <tr style="border-bottom: 2px solid #6A7FA0;">
                                <th style="padding: 12px 15px; text-align: left; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Semestre</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Presupuesto</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Matr√≠cula Inscrita</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Matr√≠cula Ciencia de Datos</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Presupuesto por Alumno</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); transition: background-color 0.3s;">
                                <td style="padding: 12px 15px; color: #D0D0D0;">2019-2</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 38,114,118.00</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">6,949.00</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">281</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 5,484.83</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background-color: rgba(255, 255, 255, 0.02);">
                                <td style="padding: 12px 15px; color: #D0D0D0;">2020-2</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 150,779,877.73</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">13,428</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">79</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 11,228.77</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                <td style="padding: 12px 15px; color: #D0D0D0;">2021-2</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 276,368,549.48</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">25,429</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">733</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 10,868.24</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background-color: rgba(255, 255, 255, 0.02);">
                                <td style="padding: 12px 15px; color: #D0D0D0;">2022</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 295,259,776.31</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">36,616</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">836</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 8,063.68</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                <td style="padding: 12px 15px; color: #D0D0D0;">2023</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 410,968,604.29</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">44,028</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">1,085</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 9,334.26</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background-color: rgba(255, 255, 255, 0.02);">
                                <td style="padding: 12px 15px; color: #D0D0D0;">2024</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 321,228,030.90</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">55,738</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">1,425</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 5,763.18</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 style="text-align: center; font-size: 20px; font-weight: 600; margin: 40px 0 30px 0; color: var(--text-primary);">Tabla 2: Presupuesto Espec√≠fico, Egresados, G√©nero y Bajas</h3>
                <div style="width: 100%; overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 13px; background: transparent;">
                        <thead>
                            <tr style="border-bottom: 2px solid #6A7FA0;">
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Presupuesto Ciencia de Datos</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Egresados</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Egresados Ciencia de Datos</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Hombres</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Mujeres</th>
                                <th style="padding: 12px 15px; text-align: right; color: #E0E0E0; font-weight: 600; background-color: rgba(60, 80, 110, 0.3);">Bajas Definitivas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 1,541,238.62</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background-color: rgba(255, 255, 255, 0.02);">
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 887,072.56</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 7,966,422.07</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">160</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">31</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">11</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">20</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">295</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background-color: rgba(255, 255, 255, 0.02);">
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 6,741,238.07</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">424</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">41</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">12</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">29</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">1,022</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 10,127,667.29</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">2,357</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">70</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">33</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">37</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">1,229</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background-color: rgba(255, 255, 255, 0.02);">
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">$ 8,212,529.05</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">5,572</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                                <td style="padding: 12px 15px; text-align: right; color: #D0D0D0;">0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Secci√≥n de Gr√°ficas de Presupuesto -->
            <section class="content-section" style="margin-top: 60px; margin-bottom: 60px;">
                <h2 class="section-title">
                    An√°lisis de <span>Presupuesto</span>
                </h2>

                <h3 style="text-align: center; font-size: 22px; font-weight: 600; margin: 40px 0 30px 0; color: var(--text-primary);">Presupuesto por Alumno por Semestre (Gr√°fica Azul)</h3>
                <div id="graph1_general" style="width: 100%; max-width: 900px; height: 500px; margin: 0 auto;"></div>

                <hr style="margin: 60px 0; border: none; border-top: 1px solid var(--gray-border);">

                <h3 style="text-align: center; font-size: 22px; font-weight: 600; margin: 40px 0 30px 0; color: var(--text-primary);">Presupuesto por Alumno (Ciencia de Datos) por Semestre (Gr√°fica Teal)</h3>
                <div id="graph2_dataciencia" style="width: 100%; max-width: 900px; height: 500px; margin: 0 auto;"></div>
            </section>

            <!-- Script para Gr√°ficas de Presupuesto -->
            <script>
                // --- DATOS (6 Semestres) ---
                const x_semestres = ['2019-2', '2020-2', '2021-2', '2022', '2023', '2024'];
                const y_presupuesto = [5484.83, 11228.77, 10868.24, 8063.68, 9334.26, 5763.18];
                const text_labels = y_presupuesto.map(val => `$${val.toFixed(2)}`);

                // --- LAYOUT BASE ---
                const base_layout = {
                    paper_bgcolor: 'transparent', 
                    plot_bgcolor: 'transparent', 
                    font: { color: 'white' },
                    xaxis: {
                        title: 'Semestre',
                        automargin: true,
                        showgrid: false,
                        zeroline: false,
                        tickfont: { color: 'white' },
                        linecolor: 'transparent',
                        tickangle: -90
                    },
                    yaxis: {
                        title: 'Presupuesto por Alumno (USD)',
                        tickformat: '$,.0f',
                        range: [0, 13000], 
                        gridcolor: 'rgba(255, 255, 255, 0.2)', 
                        griddash: 'dash', 
                        zeroline: false,
                        tickfont: { color: 'white' },
                        linecolor: 'transparent'
                    },
                    bargap: 0.1,
                    hovermode: 'closest',
                    margin: { l: 70, r: 40, t: 60, b: 100 }
                };
                
                const config = {
                    displayModeBar: false,
                    responsive: true,
                    displaylogo: false,
                    staticPlot: true
                };

                // --- GR√ÅFICA 1: Presupuesto General (TERRACOTA MATE) ---
                const trace_g1 = {
                    x: x_semestres,
                    y: y_presupuesto,
                    type: 'bar',
                    marker: {
                        color: y_presupuesto,
                        colorscale: [[0, '#8B5A3C'], [0.5, '#A67C52'], [1, '#C9A876']],
                        showscale: false,
                        line: { color: '#6B3A1C', width: 1.5 }
                    },
                    text: text_labels,
                    textposition: 'outside',
                    textfont: { color: '#D0D0D0', size: 11, family: 'Arial' },
                    hovertemplate: 'Semestre: %{x}<br>Presupuesto: $%{y:,.2f}<extra></extra>' 
                };

                const layout_g1 = {
                    ...base_layout,
                    title: {
                        text: '<b>Presupuesto por Alumno por Semestre</b>',
                        font: { size: 20, color: 'white' }
                    }
                };

                Plotly.newPlot('graph1_general', [trace_g1], layout_g1, config);

                // --- GR√ÅFICA 2: Ciencia de Datos (AZUL-GRIS MATE) ---
                const trace_g2 = {
                    x: x_semestres,
                    y: y_presupuesto,
                    type: 'bar',
                    marker: {
                        color: y_presupuesto,
                        colorscale: [[0, '#475569'], [0.5, '#64748B'], [1, '#94A3B8']],
                        showscale: false,
                        line: { color: '#1E293B', width: 1.5 }
                    },
                    text: text_labels,
                    textposition: 'outside',
                    textfont: { color: '#D0D0D0', size: 11, family: 'Arial' },
                    hovertemplate: 'Semestre: %{x}<br>Presupuesto: $%{y:,.2f}<extra></extra>' 
                };

                const layout_g2 = {
                    ...base_layout,
                    title: {
                        text: '<b>Presupuesto por Alumno (Ciencia de Datos) por Semestre</b>',
                        font: { size: 20, color: 'white' }
                    },
                    yaxis: {
                        ...base_layout.yaxis,
                        tickvals: [0, 2000, 4000, 6000, 8000, 10000, 12000]
                    }
                };

                Plotly.newPlot('graph2_dataciencia', [trace_g2], layout_g2, config);
            </script>

            <!-- Secci√≥n de Probabilidad de Reprobar -->
            <section class="content-section" style="margin-top: 60px; margin-bottom: 60px;">
                <h2 class="section-title">
                    Probabilidad de <span>Reprobar</span>
                </h2>

                <h3 style="text-align: center; font-size: 22px; font-weight: 600; margin: 40px 0 30px 0; color: var(--text-primary);">Probabilidad de Reprobar por Semestre (Emp√≠rica)</h3>
                <div id="probabilidadReprobarChart" style="width: 100%; max-width: 900px; height: 500px; margin: 0 auto;"></div>
            </section>

            <!-- Script para Gr√°fica de Probabilidad de Reprobar -->
            <script>
                // --- DATOS ---
                const x_semestre = [3, 7];
                const y_probabilidad = [0.75, 0.50];

                // --- TRACE ---
                const trace_probabilidad = {
                    x: x_semestre,
                    y: y_probabilidad,
                    type: 'bar',
                    marker: {
                        color: ['#D9668B', '#D99447'],
                        line: { color: ['#A84D6F', '#C9A876'], width: 2 }
                    },
                    text: y_probabilidad.map(val => (val * 100).toFixed(0) + '%'),
                    textposition: 'outside',
                    textfont: { color: '#C9A876', size: 14, family: 'Arial Black' },
                    hovertemplate: 'Semestre: %{x}<br>Probabilidad: %{y:.0%}<extra></extra>'
                };

                // --- LAYOUT ---
                const layoutReprobar = {
                    title: {
                        text: '<b>Probabilidad de Reprobar por Semestre (Emp√≠rica)</b>',
                        font: { size: 22, color: '#7EBFBF' }
                    },
                    paper_bgcolor: 'transparent',
                    plot_bgcolor: 'transparent',
                    xaxis: {
                        title: {
                            text: 'Semestre',
                            font: { size: 14, color: '#7EBFBF' }
                        },
                        automargin: true,
                        showgrid: false,
                        zeroline: false,
                        tickfont: { color: '#7EBFBF', size: 12 },
                        linecolor: 'transparent'
                    },
                    yaxis: {
                        title: {
                            text: 'Probabilidad de Reprobar',
                            font: { size: 14, color: '#7EBFBF' }
                        },
                        range: [0, 1],
                        tickformat: '.0%',
                        gridcolor: 'rgba(126, 191, 191, 0.15)',
                        griddash: 'dash',
                        zeroline: false,
                        tickfont: { color: '#7EBFBF', size: 11 },
                        linecolor: 'transparent'
                    },
                    bargap: 0.3,
                    hovermode: 'closest',
                    margin: { l: 80, r: 40, t: 80, b: 70 }
                };

                // --- CONFIGURACI√ìN ---
                const configReprobar = {
                    displayModeBar: false,
                    responsive: true,
                    staticPlot: true
                };

                // --- RENDERIZADO ---
                Plotly.newPlot('probabilidadReprobarChart', [trace_probabilidad], layoutReprobar, configReprobar);
            </script>

            <!-- Modal para gr√°ficas expandidas -->
            <div id="chartModal" class="chart-modal">
                <div class="chart-modal-content">
                    <button class="chart-modal-close" onclick="closeChartModal()">
                        <i class="fas fa-times"></i>
                    </button>
                    <div id="expandedChartContainer"></div>
                </div>
            </div>

            <style>
                .chart-modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.85);
                    backdrop-filter: blur(10px);
                    -webkit-backdrop-filter: blur(10px);
                    z-index: 2000;
                    justify-content: center;
                    align-items: center;
                    padding: 20px;
                    animation: fadeIn 0.3s ease;
                }

                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }

                .chart-modal-content {
                    position: relative;
                    background: var(--glass-bg);
                    backdrop-filter: blur(30px) saturate(200%);
                    -webkit-backdrop-filter: blur(30px) saturate(200%);
                    border: 1px solid var(--glass-border);
                    border-radius: 28px;
                    width: 95%;
                    max-width: 1000px;
                    height: 80vh;
                    padding: 40px;
                    box-shadow: 
                        0 30px 80px rgba(0, 0, 0, 0.4),
                        0 0 80px rgba(220, 38, 38, 0.15),
                        0 1px 0 rgba(255, 255, 255, 0.5) inset;
                    display: flex;
                    flex-direction: column;
                    animation: scaleIn 0.4s cubic-bezier(0.23, 1, 0.32, 1);
                }

                :root.dark-mode .chart-modal-content {
                    background: rgba(20, 20, 35, 0.95);
                    border-color: rgba(212, 175, 55, 0.2);
                    box-shadow: 
                        0 30px 80px rgba(0, 0, 0, 0.6),
                        0 0 80px rgba(212, 175, 55, 0.15),
                        0 1px 0 rgba(212, 175, 55, 0.15) inset;
                }

                @keyframes scaleIn {
                    from { 
                        opacity: 0;
                        transform: scale(0.9);
                    }
                    to { 
                        opacity: 1;
                        transform: scale(1);
                    }
                }

                .chart-modal-close {
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, var(--accent-red), #991B1B);
                    color: white;
                    border: none;
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 20px;
                    z-index: 2001;
                    box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .chart-modal-close:hover {
                    background: linear-gradient(135deg, #991B1B, var(--accent-red));
                    transform: scale(1.1) rotate(90deg);
                    box-shadow: 0 10px 30px rgba(220, 38, 38, 0.5);
                }

                #expandedChartContainer {
                    width: 100%;
                    height: 100%;
                    flex: 1;
                }
            </style>

            <script>
                // Configuraci√≥n de Chart.js mejorada
                Chart.defaults.font.family = "'Google Sans', 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'sans-serif'";
                
                // Detectar modo oscuro
                const isDarkMode = () => document.documentElement.classList.contains('dark-mode');
                const getTextColor = () => '#FFFFFF';
                const getSecondaryColor = () => '#FFFFFF';

                // Almacenar instancias de gr√°ficos
                const chartsInstances = {};

                // Colores vibrantes para gr√°ficas
                const chartColors = {
                    primary: '#DC2626',
                    secondary: '#D4AF37',
                    tertiary: '#6C5CE7',
                    gradient1: ['#DC2626', '#FF6B6B'],
                    gradient2: ['#D4AF37', '#FFD700']
                };

                // --- GR√ÅFICA 1: G√âNERO (Gr√°fico de Pastel) ---
                const generoData = {
                    labels: ['Femenino', 'Masculino'],
                    datasets: [{
                        data: [10, 15],
                        backgroundColor: ['#DC2626', '#D4AF37'],
                        hoverBackgroundColor: ['#FF6B6B', '#FFD700'],
                        hoverOffset: 8,
                        borderColor: isDarkMode() ? '#1a1a2e' : '#fff',
                        borderWidth: 3
                    }]
                };

                chartsInstances.genero = new Chart(document.getElementById('generoChart'), {
                    type: 'pie',
                    data: generoData,
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false,
                        animation: { duration: 400 },
                        plugins: { 
                            legend: { 
                                position: 'bottom', 
                                labels: { 
                                    color: getTextColor(),
                                    font: { weight: '600', size: 12 },
                                    padding: 16
                                } 
                            }, 
                            tooltip: { 
                                titleColor: '#fff', 
                                bodyColor: '#fff', 
                                backgroundColor: 'rgba(26, 26, 46, 0.95)',
                                borderColor: 'rgba(212, 175, 55, 0.3)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8
                            } 
                        } 
                    }
                });

                // --- GR√ÅFICA 2: RANGO DE EDAD (Gr√°fico de Barras Horizontal) ---
                const edadData = {
                    labels: ['17‚Äì19 a√±os', '25‚Äì29 a√±os', '20‚Äì22 a√±os', '23‚Äì25 a√±os', 'M√°s de 30'],
                    datasets: [{
                        label: 'Estudiantes',
                        data: [2, 4, 5, 6, 8],
                        backgroundColor: '#DC2626',
                        hoverBackgroundColor: '#FF6B6B',
                        borderColor: '#991B1B',
                        borderWidth: 0,
                        borderRadius: 8
                    }]
                };

                chartsInstances.edad = new Chart(document.getElementById('edadChart'), {
                    type: 'bar',
                    data: edadData,
                    options: { 
                        indexAxis: 'y', 
                        responsive: true, 
                        maintainAspectRatio: false,
                        animation: { duration: 400 },
                        scales: { 
                            x: { 
                                beginAtZero: true, 
                                ticks: { color: getSecondaryColor(), font: { weight: '500' } },
                                grid: { color: isDarkMode() ? 'rgba(255,255,255,0.08)' : 'rgba(0,0,0,0.06)' }
                            }, 
                            y: { 
                                ticks: { color: getTextColor(), font: { weight: '600' } },
                                grid: { display: false }
                            } 
                        }, 
                        plugins: { 
                            legend: { display: false }, 
                            tooltip: { 
                                titleColor: '#fff', 
                                bodyColor: '#fff', 
                                backgroundColor: 'rgba(26, 26, 46, 0.95)',
                                padding: 12,
                                cornerRadius: 8
                            } 
                        } 
                    }
                });

                // --- GR√ÅFICA 3: PENSADO EN ABANDONAR ---
                const abandonarData = {
                    labels: ['Muy frecuentemente', 'Algunas veces', 'Nunca', 'Pocas veces'],
                    datasets: [{
                        label: 'Respuestas',
                        data: [3, 4, 8, 10],
                        backgroundColor: '#D4AF37',
                        hoverBackgroundColor: '#FFD700',
                        borderWidth: 0,
                        borderRadius: 8
                    }]
                };

                chartsInstances.abandonar = new Chart(document.getElementById('abandonarChart'), {
                    type: 'bar',
                    data: abandonarData,
                    options: { 
                        indexAxis: 'y', 
                        responsive: true, 
                        maintainAspectRatio: false,
                        animation: { duration: 400 },
                        scales: { 
                            x: { 
                                beginAtZero: true, 
                                ticks: { color: getSecondaryColor(), font: { weight: '500' } },
                                grid: { color: isDarkMode() ? 'rgba(255,255,255,0.08)' : 'rgba(0,0,0,0.06)' }
                            }, 
                            y: { 
                                ticks: { color: getTextColor(), font: { weight: '600' } },
                                grid: { display: false }
                            } 
                        }, 
                        plugins: { 
                            legend: { display: false }, 
                            tooltip: { 
                                titleColor: '#fff', 
                                bodyColor: '#fff', 
                                backgroundColor: 'rgba(26, 26, 46, 0.95)',
                                padding: 12,
                                cornerRadius: 8
                            } 
                        } 
                    }
                });

                // --- GR√ÅFICA 4: CONOCE A COMPA√ëERO QUE ABANDON√ì ---
                const conoceData = {
                    labels: ['S√≠ (64%)', 'No (28%)', 'No estoy seguro (8%)'],
                    datasets: [{
                        data: [16, 7, 2],
                        backgroundColor: ['#DC2626', '#D4AF37', '#6C5CE7'],
                        hoverBackgroundColor: ['#FF6B6B', '#FFD700', '#818CF8'],
                        hoverOffset: 8,
                        borderColor: isDarkMode() ? '#1a1a2e' : '#fff',
                        borderWidth: 3
                    }]
                };

                chartsInstances.conoce = new Chart(document.getElementById('conoceAbandonoChart'), {
                    type: 'pie',
                    data: conoceData,
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false,
                        animation: { duration: 400 },
                        plugins: { 
                            legend: { 
                                position: 'bottom', 
                                labels: { 
                                    color: getTextColor(),
                                    font: { weight: '600', size: 11 },
                                    padding: 12
                                } 
                            }, 
                            tooltip: { 
                                titleColor: '#fff', 
                                bodyColor: '#fff', 
                                backgroundColor: 'rgba(26, 26, 46, 0.95)',
                                padding: 12,
                                cornerRadius: 8
                            } 
                        } 
                    }
                });

                // --- GR√ÅFICA 5: RAZ√ìN DE ABANDONO ---
                const razonData = {
                    labels: ['Econ√≥mica', 'Falta motivaci√≥n', 'Familiar', 'Acad√©mica', 'Problemas univ.', 'Laborales', 'Transporte', 'Paternidad'],
                    datasets: [{
                        label: 'Cantidad',
                        data: [9, 6, 3, 2, 2, 1, 1, 1],
                        backgroundColor: '#6C5CE7',
                        hoverBackgroundColor: '#818CF8',
                        borderWidth: 0,
                        borderRadius: 8
                    }]
                };

                chartsInstances.razon = new Chart(document.getElementById('razonAbandonoChart'), {
                    type: 'bar',
                    data: razonData,
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false,
                        animation: { duration: 400 },
                        scales: { 
                            y: { 
                                beginAtZero: true, 
                                ticks: { color: getSecondaryColor(), font: { weight: '500' } },
                                grid: { color: isDarkMode() ? 'rgba(255,255,255,0.08)' : 'rgba(0,0,0,0.06)' }
                            }, 
                            x: { 
                                ticks: { 
                                    color: getTextColor(), 
                                    font: { weight: '600', size: 10 },
                                    maxRotation: 45,
                                    minRotation: 45
                                },
                                grid: { display: false }
                            } 
                        }, 
                        plugins: { 
                            legend: { display: false }, 
                            tooltip: { 
                                titleColor: '#fff', 
                                bodyColor: '#fff', 
                                backgroundColor: 'rgba(26, 26, 46, 0.95)',
                                padding: 12,
                                cornerRadius: 8
                            } 
                        } 
                    }
                });

                // --- GR√ÅFICA 6: RECIBE APOYO ACAD√âMICO ---
                const apoyoData = {
                    labels: ['No recibo', 'Ocasional', 'Constante'],
                    datasets: [{
                        label: 'Estudiantes',
                        data: [17, 7, 1],
                        backgroundColor: ['#DC2626', '#D4AF37', '#6C5CE7'],
                        hoverBackgroundColor: ['#FF6B6B', '#FFD700', '#818CF8'],
                        borderWidth: 0,
                        borderRadius: 8
                    }]
                };

                chartsInstances.apoyo = new Chart(document.getElementById('apoyoAcademicoChart'), {
                    type: 'bar',
                    data: apoyoData,
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false,
                        animation: { duration: 400 },
                        scales: { 
                            y: { 
                                beginAtZero: true, 
                                max: 20, 
                                ticks: { color: getSecondaryColor(), font: { weight: '500' } },
                                grid: { color: isDarkMode() ? 'rgba(255,255,255,0.08)' : 'rgba(0,0,0,0.06)' }
                            }, 
                            x: { 
                                ticks: { color: getTextColor(), font: { weight: '600' } },
                                grid: { display: false }
                            } 
                        }, 
                        plugins: { 
                            legend: { display: false }, 
                            tooltip: { 
                                titleColor: '#fff', 
                                bodyColor: '#fff', 
                                backgroundColor: 'rgba(26, 26, 46, 0.95)',
                                padding: 12,
                                cornerRadius: 8
                            } 
                        } 
                    }
                });

                // Funciones para expandir gr√°ficas
                let currentExpandedChart = null;

                function expandChart(chartKey) {
                    const modal = document.getElementById('chartModal');
                    const container = document.getElementById('expandedChartContainer');
                    
                    // Manejo especial para gr√°fica de Regresi√≥n Log√≠stica (Plotly)
                    if (chartKey === 'regresion') {
                        container.innerHTML = '<div id="expandedLogisticChart" style="width: 100%; height: 100%;"></div>';
                        modal.style.display = 'flex';
                        
                        // Renderizar la gr√°fica de Plotly expandida
                        setTimeout(() => {
                            const x_historico = [2, 3, 4, 6, 7];
                            const y_historico = [1, 1, 1, 0, 0];
                            
                            const x_sigmoide = [];
                            const y_sigmoide = [];
                            for (let x = 2.0; x <= 7.0; x += 0.05) {
                                x_sigmoide.push(x);
                                const prob = 1 / (1 + Math.exp(3 * x - 15)); 
                                y_sigmoide.push(prob);
                            }

                            const x_prediccion = [5];
                            const y_prediccion = [0.52];

                            const trace_historico = {
                                x: x_historico,
                                y: y_historico,
                                mode: 'markers',
                                type: 'scatter',
                                name: 'Datos Hist√≥ricos (Clases 0/1)',
                                marker: {
                                    color: '#4F46E5',
                                    size: 12,
                                    opacity: 0.8
                                }
                            };

                            const trace_sigmoide = {
                                x: x_sigmoide,
                                y: y_sigmoide,
                                mode: 'lines',
                                type: 'scatter',
                                name: 'Curva Sigmoide (Probabilidad P(Y=1))',
                                line: {
                                    color: '#DC2626',
                                    width: 3
                                }
                            };

                            const trace_prediccion = {
                                x: x_prediccion,
                                y: y_prediccion,
                                mode: 'markers',
                                type: 'scatter',
                                name: 'Semestre 5 (Predicci√≥n) P(Y=1) = 0.52',
                                marker: {
                                    color: '#F59E0B',
                                    size: 15,
                                    symbol: 'circle',
                                    line: {
                                        color: 'black',
                                        width: 1
                                    }
                                }
                            };

                            const data = [trace_sigmoide, trace_historico, trace_prediccion];

                            const layout = {
                                title: {
                                    text: '<b>Regresi√≥n Log√≠stica: Predicci√≥n del Semestre 5</b>',
                                    font: { size: 22 }
                                },
                                xaxis: {
                                    title: 'Semestre (X)',
                                    range: [1.8, 7.2],
                                    tickmode: 'linear',
                                    tick0: 2,
                                    dtick: 1,
                                    gridcolor: '#ddd',
                                    zeroline: false
                                },
                                yaxis: {
                                    title: 'Probabilidad de Reprueba Alto (P(Y=1))',
                                    range: [-0.05, 1.05],
                                    tickvals: [0, 0.5, 1],
                                    ticktext: ['0 (NO)', '0.5', '1 (S√ç)'],
                                    gridcolor: '#ddd',
                                    zeroline: false
                                },
                                showlegend: true,
                                legend: {
                                    x: 0.6,
                                    y: 0.8,
                                    bgcolor: 'rgba(255, 255, 255, 0.5)',
                                    bordercolor: '#ccc',
                                    borderwidth: 1
                                },
                                shapes: [
                                    {
                                        type: 'line',
                                        xref: 'paper',
                                        yref: 'y',
                                        x0: 0,
                                        y0: 0.5,
                                        x1: 1,
                                        y1: 0.5,
                                        line: {
                                            color: '#10B981',
                                            width: 2,
                                            dash: 'dot'
                                        }
                                    }
                                ],
                                hovermode: 'closest'
                            };

                            const config = {
                                displayModeBar: true,
                                responsive: true,
                                displaylogo: false
                            };

                            Plotly.newPlot('expandedLogisticChart', data, layout, config);
                        }, 100);
                        return;
                    }
                    
                    // Manejo para gr√°ficas de Chart.js
                    if (!chartsInstances[chartKey]) return;
                    
                    const originalChart = chartsInstances[chartKey];
                    
                    // Limpiar container
                    container.innerHTML = '<canvas id="tempChart" style="width: 100% !important; height: 100% !important;"></canvas>';
                    
                    // Copiar la configuraci√≥n del gr√°fico original
                    const chartConfig = {
                        type: originalChart.config.type,
                        data: JSON.parse(JSON.stringify(originalChart.config.data)),
                        options: JSON.parse(JSON.stringify(originalChart.config.options))
                    };
                    
                    chartConfig.options.maintainAspectRatio = false;
                    
                    // Crear el gr√°fico expandido
                    currentExpandedChart = new Chart(document.getElementById('tempChart'), chartConfig);
                    modal.style.display = 'flex';
                    
                    document.addEventListener('keydown', handleEscapeChart);
                }

                function closeChartModal() {
                    document.getElementById('chartModal').style.display = 'none';
                    if (currentExpandedChart) {
                        currentExpandedChart.destroy();
                        currentExpandedChart = null;
                    }
                    document.removeEventListener('keydown', handleEscapeChart);
                }

                function handleEscapeChart(e) {
                    if (e.key === 'Escape') closeChartModal();
                }

                document.getElementById('chartModal').addEventListener('click', (e) => {
                    if (e.target.id === 'chartModal') closeChartModal();
                });
            </script>
        </section>

        <!-- Forum Container -->
        <div class="forum-container">
            <!-- New Post Section -->
            <section class="new-post-section">
                <h3>Participar en la Comunidad</h3>
                <form id="post-form">
                    <div class="form-group">
                        <label for="post-author">Tu nombre</label>
                        <input type="text" id="post-author" name="author" placeholder="Escribe tu nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="post-title">Asunto</label>
                        <input type="text" id="post-title" name="title" placeholder="¬øCu√°l es tu pregunta o comentario?"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="post-content">Mensaje</label>
                        <textarea id="post-content" name="content" placeholder="Cu√©ntanos m√°s detalles..."
                            required></textarea>
                    </div>
                    <button type="submit" class="btn-submit">Publicar</button>
                </form>
            </section>

            <!-- Posts List -->
            <section class="posts-list" id="posts-list">
                <div class="empty-state">
                    <div class="empty-state-icon">üí¨</div>
                    <div class="empty-state-title">S√© el primero en comentar</div>
                    <p>No hay conversaciones a√∫n. ¬°Crea la primera arriba!</p>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 A.L.M.A - Administraci√≥n Log√≠stica y Modular Acad√©mica. Todos los derechos reservados.</p>
    </footer>

    <script>
        // ========== DARK MODE SYSTEM ==========

        class DarkModeManager {
            constructor() {
                this.toggleBtn = document.getElementById('dark-mode-toggle');
                this.isDarkMode = localStorage.getItem('darkMode') === 'true';

                // Aplicar modo guardado al cargar
                if (this.isDarkMode) {
                    this.enableDarkMode();
                }

                // Event listener para el bot√≥n
                this.toggleBtn.addEventListener('click', () => this.toggle());
            }

            toggle() {
                this.isDarkMode ? this.disableDarkMode() : this.enableDarkMode();
            }

            enableDarkMode() {
                document.documentElement.classList.add('dark-mode');
                this.toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
                localStorage.setItem('darkMode', 'true');
                this.isDarkMode = true;
            }

            disableDarkMode() {
                document.documentElement.classList.remove('dark-mode');
                this.toggleBtn.innerHTML = '<i class="fas fa-moon"></i>';
                localStorage.setItem('darkMode', 'false');
                this.isDarkMode = false;
            }
        }

        // Inicializar modo oscuro
        const darkModeManager = new DarkModeManager();

        // ========== FORUM SYSTEM ==========

        class ForumSystem {
            constructor() {
                this.postForm = document.getElementById('post-form');
                this.postsList = document.getElementById('posts-list');
                this.posts = this.loadPosts();

                this.postForm.addEventListener('submit', (e) => this.handleNewPost(e));
                this.renderPosts();
            }

            loadPosts() {
                const stored = localStorage.getItem('alma_forum_posts');
                return stored ? JSON.parse(stored) : [];
            }

            savePosts() {
                localStorage.setItem('alma_forum_posts', JSON.stringify(this.posts));
            }

            handleNewPost(e) {
                e.preventDefault();

                const author = document.getElementById('post-author').value;
                const title = document.getElementById('post-title').value;
                const content = document.getElementById('post-content').value;

                const post = {
                    id: Date.now(),
                    author,
                    title,
                    content,
                    timestamp: new Date(),
                    responses: []
                };

                this.posts.unshift(post);
                this.savePosts();
                this.postForm.reset();
                this.renderPosts();
            }

            deletePost(postId) {
                if (confirm('¬øEst√°s seguro de que deseas eliminar este post?')) {
                    this.posts = this.posts.filter(p => p.id !== postId);
                    this.savePosts();
                    this.renderPosts();
                }
            }

            addResponse(postId, content) {
                const post = this.posts.find(p => p.id === postId);
                if (post) {
                    post.responses.push({
                        id: Date.now(),
                        content,
                        timestamp: new Date()
                    });
                    this.savePosts();
                    this.renderPosts();
                }
            }

            deleteResponse(postId, responseId) {
                if (confirm('¬øEst√°s seguro de que deseas eliminar esta respuesta?')) {
                    const post = this.posts.find(p => p.id === postId);
                    if (post) {
                        post.responses = post.responses.filter(r => r.id !== responseId);
                        this.savePosts();
                        this.renderPosts();
                    }
                }
            }

            formatDate(date) {
                const d = new Date(date);
                const now = new Date();
                const diff = now - d;

                if (diff < 60000) return 'Hace unos segundos';
                if (diff < 3600000) return `Hace ${Math.floor(diff / 60000)} minutos`;
                if (diff < 86400000) return `Hace ${Math.floor(diff / 3600000)} horas`;

                return d.toLocaleDateString('es-ES');
            }

            renderPosts() {
                if (this.posts.length === 0) {
                    this.postsList.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üí¨</div>
                            <div class="empty-state-title">S√© el primero en comentar</div>
                            <p>No hay conversaciones a√∫n. ¬°Crea la primera arriba!</p>
                        </div>
                    `;
                    return;
                }

                this.postsList.innerHTML = this.posts.map(post => `
                    <div class="post" data-post-id="${post.id}">
                        <div class="post-header">
                            <div>
                                <div class="post-author">${this.escapeHtml(post.author)}</div>
                                <div class="post-time">${this.formatDate(post.timestamp)}</div>
                            </div>
                        </div>
                        
                        <h4 style="font-size: 16px; margin-bottom: 8px; color: var(--text-primary);">
                            ${this.escapeHtml(post.title)}
                        </h4>
                        
                        <div class="post-content">
                            ${this.escapeHtml(post.content)}
                        </div>
                        
                        <div class="post-actions">
                            <button class="post-action-btn" onclick="window.forum.toggleReplyForm(${post.id})">
                                <i class="fas fa-reply"></i> Responder
                            </button>
                            <button class="post-action-btn" onclick="window.forum.deletePost(${post.id})">
                                <i class="fas fa-trash"></i> Eliminar
                            </button>
                        </div>
                        
                        <div class="reply-form" id="reply-form-${post.id}">
                            <textarea placeholder="Escribe tu respuesta..." id="response-text-${post.id}"></textarea>
                            <div class="reply-form-actions">
                                <button class="reply-form-btn" onclick="window.forum.submitResponse(${post.id})">
                                    Enviar
                                </button>
                                <button class="reply-form-btn cancel" onclick="window.forum.toggleReplyForm(${post.id})">
                                    Cancelar
                                </button>
                            </div>
                        </div>
                        
                        ${post.responses.length > 0 ? `
                            <div class="responses">
                                ${post.responses.map(response => `
                                    <div class="response">
                                        <div class="response-author">Usuario An√≥nimo</div>
                                        <div class="response-content">${this.escapeHtml(response.content)}</div>
                                        <div class="response-actions">
                                            <button class="response-action" onclick="window.forum.deleteResponse(${post.id}, ${response.id})">
                                                Eliminar
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            toggleReplyForm(postId) {
                const form = document.getElementById(`reply-form-${postId}`);
                form?.classList.toggle('active');
            }

            submitResponse(postId) {
                const textarea = document.getElementById(`response-text-${postId}`);
                const content = textarea.value.trim();

                if (content) {
                    this.addResponse(postId, content);
                    this.toggleReplyForm(postId);
                }
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Inicializar forum cuando carga la p√°gina
        window.addEventListener('DOMContentLoaded', () => {
            window.forum = new ForumSystem();
        });
    </script>

    <!-- Script para part√≠culas UNRC flotantes -->
    <script>
        // Sistema de part√≠culas UNRC mejorado con limpieza perfecta
        class UnrcParticleSystem {
            constructor() {
                this.canvas = document.getElementById('particleCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.particleCount = 80;
                this.centerX = window.innerWidth / 2;
                this.centerY = window.innerHeight / 2;
                this.time = 0;
                this.letterPixels = [];
                
                this.resize();
                this.generateLetterPixels();
                this.init();
                this.animate();
                
                window.addEventListener('resize', () => this.resize());
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                this.centerX = window.innerWidth / 2;
                this.centerY = window.innerHeight / 2;
            }

            generateLetterPixels() {
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = 1000;
                tempCanvas.height = 350;
                const tempCtx = tempCanvas.getContext('2d');
                
                tempCtx.fillStyle = 'white';
                tempCtx.font = 'bold 240px Arial, sans-serif';
                tempCtx.textAlign = 'center';
                tempCtx.textBaseline = 'middle';
                tempCtx.fillText('UNRC', 500, 175);
                
                const imageData = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height);
                const data = imageData.data;
                this.letterPixels = [];
                
                // Extraer p√≠xeles con mejor densidad
                for (let i = 0; i < data.length; i += 16) {
                    if (data[i + 3] > 128) {
                        const pixelIndex = i / 4;
                        this.letterPixels.push({
                            x: pixelIndex % tempCanvas.width,
                            y: Math.floor(pixelIndex / tempCanvas.width)
                        });
                    }
                }
            }

            init() {
                this.particles = [];
                for (let i = 0; i < this.particleCount; i++) {
                    this.particles.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        vx: 0,
                        vy: 0,
                        size: Math.random() * 2.2 + 0.6,
                        opacity: Math.random() * 0.55 + 0.45,
                        targetX: 0,
                        targetY: 0,
                        attraction: 0.035 + Math.random() * 0.015,
                        repulsion: 0.9 + Math.random() * 0.1,
                        mass: 1,
                        baseOpacity: 0
                    });
                }
            }

            update() {
                this.time += 0.01;
                
                if (this.letterPixels.length === 0) return;
                
                // Aplicar atracci√≥n hacia las letras
                for (let i = 0; i < this.particles.length; i++) {
                    const particle = this.particles[i];
                    const pixel = this.letterPixels[i % this.letterPixels.length];
                    
                    const scale = Math.min(this.canvas.width, this.canvas.height) / 1100;
                    const offsetX = this.centerX - (1000 * scale) / 2;
                    const offsetY = this.centerY - (350 * scale) / 2;
                    
                    particle.targetX = offsetX + pixel.x * scale;
                    particle.targetY = offsetY + pixel.y * scale;
                    
                    const dx = particle.targetX - particle.x;
                    const dy = particle.targetY - particle.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance > 1) {
                        particle.vx += (dx / distance) * particle.attraction * 0.8;
                        particle.vy += (dy / distance) * particle.attraction * 0.8;
                    }
                }
                
                // Repulsi√≥n entre part√≠culas (optimizada cada 2 frames)
                if (this.time % 2 === 0) {
                    const repulsionRange = 40;
                    for (let i = 0; i < this.particles.length; i++) {
                        for (let j = i + 1; j < Math.min(i + 10, this.particles.length); j++) {
                        const p1 = this.particles[i];
                        const p2 = this.particles[j];
                        const dx = p1.x - p2.x;
                        const dy = p1.y - p2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < repulsionRange && distance > 2) {
                            const force = (1 - distance / repulsionRange) * 0.25;
                            const angle = Math.atan2(dy, dx);
                            
                            p1.vx += Math.cos(angle) * force * p2.repulsion * 0.5;
                            p1.vy += Math.sin(angle) * force * p2.repulsion * 0.5;
                            p2.vx -= Math.cos(angle) * force * p1.repulsion * 0.5;
                            p2.vy -= Math.sin(angle) * force * p1.repulsion * 0.5;
                        }
                    }
                }
                }
                
                // Actualizar posiciones con damping fuerte
                for (let i = 0; i < this.particles.length; i++) {
                    const particle = this.particles[i];
                    
                    particle.vx *= 0.91;
                    particle.vy *= 0.91;
                    
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    
                    // Ruido Perlin simple para oscilaci√≥n natural (optimizado)
                    const noise = 0.1;
                    particle.x += Math.sin(this.time * 0.3 + i * 0.02) * noise;
                    particle.y += Math.cos(this.time * 0.3 + i * 0.025) * noise;
                    
                    // Limites suaves
                    const margin = 15;
                    if (particle.x < margin) {
                        particle.x = margin;
                        particle.vx = 0;
                    }
                    if (particle.x > this.canvas.width - margin) {
                        particle.x = this.canvas.width - margin;
                        particle.vx = 0;
                    }
                    if (particle.y < margin) {
                        particle.y = margin;
                        particle.vy = 0;
                    }
                    if (particle.y > this.canvas.height - margin) {
                        particle.y = this.canvas.height - margin;
                        particle.vy = 0;
                    }
                }
            }

            draw() {
                // Limpiar completamente el canvas sin rastros
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Dibujar part√≠culas con dise√±o mejorado
                for (let particle of this.particles) {
                    // Halo exterior suave con colores mejorados
                    const haloGradient = this.ctx.createRadialGradient(
                        particle.x, particle.y, 0,
                        particle.x, particle.y, particle.size * 2.5
                    );
                    haloGradient.addColorStop(0, `rgba(255, 100, 100, ${particle.opacity * 0.25})`);
                    haloGradient.addColorStop(0.5, `rgba(255, 200, 100, ${particle.opacity * 0.1})`);
                    haloGradient.addColorStop(1, `rgba(255, 200, 100, 0)`);
                    
                    this.ctx.fillStyle = haloGradient;
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size * 2.5, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Centro brillante con gradiente radial mejorado
                    const coreGradient = this.ctx.createRadialGradient(
                        particle.x - particle.size * 0.2, particle.y - particle.size * 0.2, 0,
                        particle.x, particle.y, particle.size
                    );
                    coreGradient.addColorStop(0, `rgba(255, 255, 255, ${particle.opacity})`);
                    coreGradient.addColorStop(0.3, `rgba(255, 150, 100, ${particle.opacity * 0.95})`);
                    coreGradient.addColorStop(0.6, `rgba(220, 38, 38, ${particle.opacity * 0.8})`);
                    coreGradient.addColorStop(1, `rgba(255, 200, 100, ${particle.opacity * 0.4})`);
                    
                    this.ctx.fillStyle = coreGradient;
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Peque√±o destello en el centro m√°s brillante
                    this.ctx.fillStyle = `rgba(255, 255, 200, ${particle.opacity * 0.8})`;
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x - particle.size * 0.3, particle.y - particle.size * 0.3, particle.size * 0.4, 0, Math.PI * 2);
                    this.ctx.fill();
                }
                
                // Conexiones entre part√≠culas cercanas (optimizadas)
                if (this.time % 2 === 0) {
                    for (let i = 0; i < this.particles.length; i++) {
                        const p1 = this.particles[i];
                        for (let j = i + 1; j < Math.min(i + 8, this.particles.length); j++) {
                            const p2 = this.particles[j];
                            const dx = p1.x - p2.x;
                            const dy = p1.y - p2.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            
                            if (dist < 35) {
                                const opacity = (1 - dist / 35) * 0.15;
                                this.ctx.strokeStyle = `rgba(255, 200, 100, ${opacity})`;
                                this.ctx.lineWidth = 0.5;
                                this.ctx.beginPath();
                                this.ctx.moveTo(p1.x, p1.y);
                                this.ctx.lineTo(p2.x, p2.y);
                                this.ctx.stroke();
                            }
                        }
                    }
                }
            }

            animate = () => {
                this.update();
                this.draw();
                requestAnimationFrame(this.animate);
            }
        }

        // Inicializar sistema de part√≠culas UNRC
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                new UnrcParticleSystem();
            }, 100);
        });
    </script>
</body>

</html>